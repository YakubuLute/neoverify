<!-- Dashboard Layout Container -->
<div class="dashboard-layout min-h-screen bg-gray-900 flex">
  
  <!-- Sidebar -->
  <aside [class]="'sidebar transition-all duration-300 bg-gray-800 border-r border-gray-700 flex flex-col ' + (sidebarCollapsed() ? 'w-16' : 'w-64')">
    
    <!-- Logo Section -->
    <div class="logo-section p-4 border-b border-gray-700">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-cyan-500 rounded-lg flex items-center justify-center shadow-lg">
          <i class="pi pi-shield text-gray-900 text-lg"></i>
        </div>
        @if (!sidebarCollapsed()) {
          <div class="flex flex-col">
            <span class="text-white font-semibold text-lg">NeoVerify</span>
            <span class="text-gray-400 text-xs font-normal">{{ getRoleDisplayName() }}</span>
          </div>
        }
      </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="navigation flex-1 py-4 overflow-y-auto">
      <ul class="space-y-2 px-3">
        @for (item of menuItems(); track item.route) {
          <li>
            @if (item.children) {
              <!-- Menu item with children -->
              <div class="menu-item-group">
                <button 
                  class="menu-item w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-gray-700 transition-all duration-200 group"
                  [class.active]="router.url.startsWith(item.route)"
                >
                  <i [class]="item.icon + ' text-lg'"></i>
                  @if (!sidebarCollapsed()) {
                    <span class="font-normal">{{ item.label }}</span>
                    <i class="pi pi-chevron-down ml-auto text-sm"></i>
                  }
                </button>
                @if (!sidebarCollapsed()) {
                  <ul class="submenu ml-6 mt-2 space-y-1">
                    @for (child of item.children; track child.route) {
                      <li>
                        <button 
                          (click)="navigateTo(child.route)"
                          class="submenu-item w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-400 hover:text-cyan-400 hover:bg-gray-700/50 transition-all duration-200 text-sm"
                          [class.active]="router.url === child.route"
                        >
                          <i [class]="child.icon + ' text-sm'"></i>
                          <span class="font-normal">{{ child.label }}</span>
                        </button>
                      </li>
                    }
                  </ul>
                }
              </div>
            } @else {
              <!-- Simple menu item -->
              <button 
                (click)="navigateTo(item.route)"
                class="menu-item w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-300 hover:text-white hover:bg-gray-700 transition-all duration-200 group"
                [class.active]="router.url === item.route"
                [title]="sidebarCollapsed() ? item.label : ''"
              >
                <i [class]="item.icon + ' text-lg'"></i>
                @if (!sidebarCollapsed()) {
                  <span class="font-normal">{{ item.label }}</span>
                  @if (item.badge) {
                    <span class="ml-auto bg-cyan-500 text-gray-900 text-xs font-semibold px-2 py-1 rounded-full">{{ item.badge }}</span>
                  }
                }
              </button>
            }
          </li>
        }
      </ul>
    </nav>

    <!-- User Profile Section -->
    <div class="user-section p-4 border-t border-gray-700">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center">
          <span class="text-white font-semibold text-sm">{{ getUserInitials() }}</span>
        </div>
        @if (!sidebarCollapsed()) {
          <div class="flex-1 min-w-0">
            <p class="text-white font-medium text-sm truncate">{{ currentUser()?.name || 'User' }}</p>
      </div>