/* ---------------- PAGE SHELL ---------------- */

.document-upload-container {
  @apply w-full min-h-screen bg-gray-50;

  /* Header bar */
  .document-upload-header {
    @apply bg-white border-b border-gray-200;

    .header-content {
      @apply max-w-6xl mx-auto px-4 md:px-6 py-4
             flex flex-col md:flex-row items-start md:items-center
             justify-between gap-4;
    }

    .title-section {
      @apply space-y-1;

      .page-title {
        @apply text-2xl md:text-3xl font-semibold text-gray-900;
      }

      .page-subtitle {
        @apply text-sm text-gray-500;
      }
    }

    .header-actions {
      @apply flex items-center gap-3;

      /* Single/Bulk toggle */
      .mode-toggle {
        @apply flex items-center gap-2 px-3 py-1.5 rounded-full
               bg-gray-100 border border-gray-200;

        .toggle-label {
          @apply text-xs font-medium text-gray-600;
        }

        ::ng-deep .p-toggleswitch {
          @apply scale-90;

          .p-toggleswitch-slider {
            @apply bg-white border border-gray-300;
          }

          &.p-toggleswitch-checked .p-toggleswitch-slider {
            @apply bg-cyan-500 border-cyan-500;
          }
        }
      }

      ::ng-deep .p-button.p-button-text {
        @apply text-gray-500 hover:text-gray-900 hover:bg-gray-100;
      }
    }
  }

  /* ---------------- CONTENT LAYOUT ---------------- */

  .upload-content {
    @apply max-w-6xl mx-auto px-4 md:px-6 py-6;

    .upload-grid {
      @apply grid grid-cols-1 lg:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] gap-6 items-start;
    }

    /* -------- Left: upload area + progress -------- */

    .upload-section {
      @apply space-y-4;

      .upload-card {
        @apply bg-white rounded-2xl border border-gray-200 shadow-sm;

        .upload-card-content {
          @apply p-5 md:p-6 space-y-5;
        }

        .upload-field {
          @apply space-y-2;

          .upload-field-label {
            @apply text-sm font-medium text-gray-800;
          }
        }

        /* Drag & Drop zone (single + bulk) */
        .drag-drop-zone {
          @apply relative flex flex-col items-center justify-center text-center
                 rounded-2xl border-2 border-dashed border-gray-300
                 bg-gradient-to-b from-gray-50 to-gray-100
                 px-4 py-10 md:px-6 md:py-12
                 cursor-pointer transition-all duration-200;

          &:hover {
            @apply border-cyan-400 bg-cyan-50/60 shadow-[0_10px_30px_rgba(15,23,42,0.06)];
          }

          &.drag-over {
            @apply border-cyan-500 bg-cyan-50;
            box-shadow: 0 0 0 1px rgba(6, 182, 212, 0.35);
          }

          .drop-zone-icon {
            @apply mb-3 flex items-center justify-center;
            i {
              @apply text-3xl text-cyan-500;
            }
          }

          .drop-zone-text {
            .drop-zone-title {
              @apply text-base md:text-lg font-medium text-gray-900;
            }
            .drop-zone-subtitle {
              @apply mt-1 text-xs md:text-sm text-gray-500;
            }
          }

          /* Selected file (single mode) */
          .file-selected-content {
            @apply flex items-center gap-4 w-full max-w-lg mx-auto text-left;

            .file-selected-icon {
              @apply flex-shrink-0 w-10 h-10 rounded-full bg-green-50
                     flex items-center justify-center;
              i {
                @apply text-lg text-green-600;
              }
            }

            .file-selected-info {
              @apply flex-1 space-y-0.5;

              .file-selected-name {
                @apply text-sm font-medium text-gray-900 truncate;
              }

              .file-selected-size {
                @apply text-xs text-gray-500;
              }

              .file-remove-btn {
                @apply mt-1 text-xs font-medium text-red-600 hover:text-red-700;
              }
            }
          }
        }

        .error-message {
          @apply mt-3;

          .error-content {
            @apply flex items-center gap-2 px-3 py-2 rounded-lg
                   bg-red-50 border border-red-100;
          }

          .error-icon {
            @apply text-red-500 text-sm;
          }

          .error-text {
            @apply text-xs text-red-700;
          }
        }
      }

      /* Upload progress card (single + bulk) */

      .progress-card {
        @apply bg-white rounded-2xl border border-gray-200 shadow-sm;

        .progress-card-content {
          @apply p-4 md:p-5 space-y-3;
        }

        .progress-card-header {
          @apply flex items-center justify-between mb-1;

          .progress-card-title {
            @apply text-sm font-semibold text-gray-900;
          }

          ::ng-deep .p-button.p-button-text {
            @apply text-red-500 hover:text-red-600 hover:bg-red-50;
          }
        }

        .progress-details {
          @apply space-y-3;

          .progress-info {
            @apply flex items-center justify-between text-xs text-gray-600;
            .progress-filename {
              @apply font-medium text-gray-800 truncate;
            }
            .progress-percentage {
              @apply font-semibold text-gray-900;
            }
          }

          ::ng-deep .p-progressbar {
            @apply h-2 rounded-full overflow-hidden bg-gray-100;

            .p-progressbar-value {
              @apply bg-cyan-500;
            }
          }
        }
      }
    }

    /* -------- Right: metadata form -------- */

    .metadata-section {
      @apply h-full;

      .metadata-card {
        @apply bg-white rounded-2xl border border-gray-200 shadow-sm
               lg:sticky lg:top-24;

        .metadata-form {
          @apply p-5 md:p-6 space-y-4;
        }

        .metadata-card-title {
          @apply text-sm font-semibold text-gray-900 mb-2;
        }

        .form-field {
          @apply space-y-1;
        }

        .form-field-label {
          @apply block text-sm font-medium text-gray-800;
        }

        .form-field-help {
          @apply text-xs text-gray-500;
        }

        .template-preview-card {
          @apply bg-gray-50 rounded-xl border border-gray-200 p-3;
        }

        .form-actions {
          @apply flex flex-col sm:flex-row justify-end gap-2 pt-2;

          ::ng-deep .p-button {
            @apply w-full sm:w-auto;
          }

          ::ng-deep .p-button.p-button-outlined {
            @apply border-gray-300 text-gray-700 hover:bg-gray-50;
          }

          ::ng-deep .p-button-primary {
            @apply bg-cyan-500 border-cyan-500 text-white
                   hover:bg-cyan-600 hover:border-cyan-600;
          }
        }
      }

      /* Generic spacing for simple .field blocks */
      .field {
        @apply mb-3;
      }
    }
  }
}

/* ---------------- PRIME-NG INPUT OVERRIDES (LOCAL TO THIS PAGE) ---------------- */

:host {
  /* Inputs, textareas, chips, etc. */
  ::ng-deep .document-upload-container .metadata-card
    .p-inputtext,
  ::ng-deep .document-upload-container .metadata-card
    textarea.p-inputtext,
  ::ng-deep .document-upload-container .metadata-card
    .p-dropdown,
  ::ng-deep .document-upload-container .metadata-card
    .p-multiselect,
  ::ng-deep .document-upload-container .metadata-card
    .p-chips .p-inputtext {
    @apply w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg;

    &:enabled:focus {
      @apply outline-none border-cyan-500 ring-2 ring-cyan-500/20;
    }
  }

  /* Datepicker */
  ::ng-deep .document-upload-container .metadata-card .p-datepicker {
    @apply w-full;
  }

  /* Select + dropdown clear button spacing */
  ::ng-deep .document-upload-container .metadata-card .p-dropdown,
  ::ng-deep .document-upload-container .metadata-card .p-select {
    .p-dropdown-label,
    .p-select-label {
      @apply text-sm;
    }
  }

  /* Chips */
  ::ng-deep .document-upload-container .metadata-card .p-chips-token {
    @apply bg-cyan-50 text-cyan-700 border border-cyan-100 text-xs;
  }

  /* Checkbox in "auto register" */
  ::ng-deep .document-upload-container .metadata-card .p-checkbox .p-checkbox-box {
    @apply bg-white border border-gray-300 rounded;
  }

  ::ng-deep .document-upload-container .metadata-card .p-checkbox .p-checkbox-box.p-highlight {
    @apply bg-cyan-500 border-cyan-500;
  }
}

/* ---------------- RESPONSIVE TWEAKS ---------------- */

@media (max-width: 1024px) {
  .document-upload-container {
    .upload-content {
      .upload-grid {
        @apply grid-cols-1;
      }

      .metadata-section .metadata-card {
        @apply lg:static;
      }
    }
  }
}
